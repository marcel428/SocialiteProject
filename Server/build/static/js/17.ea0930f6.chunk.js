(this["webpackJsonpui-italy"]=this["webpackJsonpui-italy"]||[]).push([[17],{202:function(e,t,i){},236:function(e,t,i){"use strict";i.r(t);var o=i(1),a=i(73),d=i(74),n=i(76),c=i(75),s=i(0),h=(i(37),i(3)),l=i(19),r=i(77),p=i.n(r),v=(i(79),i(94)),j=i(95),u=i(172),m=i.n(u),x=(i(96),i(97),i(202),function(e){Object(n.a)(i,e);var t=Object(c.a)(i);function i(e){var o;return Object(a.a)(this,i),(o=t.call(this,e)).state={template:o.props.location.state.query,videoFilePath:o.props.location.state.videoFilePath,videoWidth:o.props.location.state.videoWidth,videoHeight:o.props.location.state.videoHeight,crop:{unit:"px",width:100,height:100,x:(o.props.location.state.videoWidth-100)/2,y:(o.props.location.state.videoHeight-100)/2},shouldRedirect:!1,savedVideo:"",loading:!1,percent:.3,mainVideoWidth:"",mainVideoHeight:"",faceVideoWidth:"",faceVideoHeight:"",faceMarginLeftAndRight:"",faceMarginTop:"",faceMarginBottom:"",totalVideoWidth:"",totalVideoHeight:""},o.handleCrop=function(e,t){o.setState({crop:e})},o.sendSelectedVideo=function(){o.setState({loading:!0}),p.a.post("".concat("http://18.119.84.95/api/v1","/editor/thumbnail"),{videoFilePath:o.props.location.state.videoFilePath,template:o.props.location.state.query,faceVideo:o.props.location.state.faceVideo?o.props.location.state.faceVideo:null,mainVideo:o.props.location.state.mainVideo}).then((function(e){console.log("res"),console.log(e),o.setState({loading:!1,shouldRedirect:!0,savedVideo:e.data})}))},o}return Object(d.a)(i,[{key:"componentDidMount",value:function(){this.socket=m()()}},{key:"componentWillUnmount",value:function(){console.log("unmounted"),this.socket.disconnect()}},{key:"render",value:function(){var e=this.props.location.state,t=window.innerWidth/2,i=e.query.mainVideo.height/e.query.mainVideo.width,a=.3*window.innerWidth;if(e.query.gamerVideo)var d=a/e.faceVideo.width,n=a,c=a*i*e.query.gamerVideo.height,s=e.videoWidth*d,r=e.videoHeight*d,p=e.faceVideo.y*d,u=e.faceVideo.x*d,m=s-u-n,x=r-e.faceVideo.y*d-c,b=t-(u+n/2),g=e.faceVideo.y*d;var V=a/e.mainVideo.width,y=e.videoWidth*V,O=e.videoHeight*V,f=e.mainVideo.y*V,w=e.videoWidth*V-e.mainVideo.x*V-e.mainVideo.width*V,W=e.videoHeight*V-e.mainVideo.y*V-e.mainVideo.height*V,P=e.mainVideo.x*V,k=t-(e.mainVideo.x*V+e.mainVideo.width*V/2);if(e.query.gamerVideo)var H=e.mainVideo.y*V+(r-c)+5;else H=e.mainVideo.y*V;var q=a*i;return this.state.shouldRedirect?Object(o.jsx)(h.a,{to:{pathname:"save",state:{savedVideo:this.state.savedVideo,displayPercentInSave:.3}}}):Object(o.jsx)("div",{children:this.state.loading?Object(o.jsx)("div",{children:"Wait a second"}):Object(o.jsxs)("div",{children:[Object(o.jsx)("div",{style:{marginBottom:"30px"},children:Object(o.jsxs)(v.a,{children:[Object(o.jsx)(j.a,{children:this.state.template&&this.state.template.gamerVideo?Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{children:"Select Facecam\xa0\xa0"}),Object(o.jsx)("input",{type:"checkbox",checked:!0,value:1,readOnly:!0})]}):null}),Object(o.jsx)(j.a,{children:this.state.template&&this.state.template.mainVideo?Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{children:"Select gamefeed\xa0\xa0"}),Object(o.jsx)("input",{type:"checkbox",checked:!0,value:1,readOnly:!0})]}):null}),Object(o.jsxs)(j.a,{children:[Object(o.jsx)("span",{children:"Preview\xa0\xa0"}),Object(o.jsx)("input",{type:"checkbox",checked:!0,value:1,readOnly:!0})]})]})}),Object(o.jsxs)("div",{style:{maxHeight:q,overflow:"hidden",width:"fit-content"},children:[e.query.gamerVideo?Object(o.jsx)("div",{children:Object(o.jsx)("video",{autoPlay:!0,width:s,height:r,src:this.props.location.state.videoFilePath,style:{position:"relative",clipPath:"inset(".concat(p,"px ").concat(m,"px ").concat(x,"px ").concat(u,"px)"),left:b,bottom:g}})}):null,Object(o.jsx)("div",{children:Object(o.jsx)("video",{autoPlay:!0,width:y,height:O,src:this.props.location.state.videoFilePath,style:{position:"relative",clipPath:"inset(".concat(f,"px ").concat(w,"px ").concat(W,"px ").concat(P,"px)"),left:k,bottom:H}})})]}),Object(o.jsxs)("div",{style:{textAlign:"center",marginTop:"30px",marginBottom:30},children:[Object(o.jsxs)("div",{children:[Object(o.jsx)(l.b,{to:{pathname:"/template",state:{videoFilePath:e.videoFilePath,videoWidth:e.videoWidth,videoHeight:e.videoHeight}},children:Object(o.jsx)("button",{children:"Change template"})}),Object(o.jsx)(l.b,{to:{pathname:e.query.gamerVideo?"face-edit":"main-edit",query:e.query,videoFilePath:e.videoFilePath,videoWidth:e.videoWidth,videoHeight:e.videoHeight},children:Object(o.jsx)("button",{children:"Redo"})})]}),Object(o.jsx)("div",{children:Object(o.jsx)("button",{onClick:this.sendSelectedVideo,children:"save"})})]})]})})}}]),i}(s.Component));t.default=x}}]);
//# sourceMappingURL=17.ea0930f6.chunk.js.map