(this["webpackJsonpui-italy"]=this["webpackJsonpui-italy"]||[]).push([[23],{258:function(e,t,a){"use strict";a.r(t);var s=a(1),r=a(27),n=a(74),i=a(75),o=a(77),d=a(76),c=a(0),l=a(13),u=a(78),p=a(3),h=a(15),m=a(79),j=a.n(m),f=a(99),b=a.n(f),y=a(240),g=a(115),v=a(119),x={content:{position:"absolute",padding:"0",width:"90%",background:"transparent",border:"none",margin:"auto",marginTop:"20px"}},O=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={name:"",email:"",password:"",confirmPassword:"",nameKey:!1,emailKey:!1,passwordKey:!1,confirmPasswordKey:!1,nameRequired:!1,emailRequired:!1,passwordRequired:!1,confirmPasswordRequired:!1,serverError:!1,error:"",shouldRedirect:!1,modalIsOpen:!1,verificationCode:""},s.handleInput=function(e,t){if(s.setState(Object(r.a)({},t,e.target.value)),"name"==t&&(e.target.value.length<4?s.setState({nameKey:!0}):s.setState({nameKey:!1}),""==e.target.value?s.setState({nameRequired:!0}):s.setState({nameRequired:!1})),"email"==t){!0===/[a-zA-Z0-9]+[\.]?([a-zA-Z0-9]+)?[\@][a-z]{3,9}[\.][a-z]{2,5}/g.test(e.target.value)?s.setState({emailKey:!1}):s.setState({emailKey:!0}),""==e.target.value?s.setState({emailRequired:!0}):s.setState({emailRequired:!1})}"password"==t&&(e.target.value.length<4?s.setState({passwordKey:!0}):s.setState({passwordKey:!1}),""==e.target.value?s.setState({passwordRequired:!0}):s.setState({passwordRequired:!1})),"confirmPassword"==t&&(e.target.value!=s.state.password?s.setState({confirmPasswordKey:!0}):s.setState({confirmPasswordKey:!1}),""==e.target.value?s.setState({confirmPasswordRequired:!0}):s.setState({confirmPasswordRequired:!1}))},s.closeModal=function(){s.setState({modalIsOpen:!1})},s.openModal=function(){s.setState({modalIsOpen:!0})},s.changeCode=function(e){s.setState({verificationCode:e.target.value})},s.sendCode=function(){j.a.post("".concat("https://socialsgonewild.com/api/v1","/auth/send-code"),{email:s.state.email}).then((function(e){e.data.status>300?s.setState({serverError:!0,error:e.data.error}):(alert("Sent verification code successfully!"),s.openModal())}))},s.verifyCode=function(){j.a.post("".concat("https://socialsgonewild.com/api/v1","/auth/verify-code"),{code:s.state.verificationCode}).then((function(e){e.data.status>300?s.setState({serverError:!0,error:e.data.error}):s.register()}))},s.register=function(){""!=s.state.name?""!=s.state.email?""!=s.state.password?""!=s.state.confirmPassword?s.state.nameKey||s.state.emailKey||s.state.passwordKey||s.state.confirmPasswordKey||j.a.post("".concat("https://socialsgonewild.com/api/v1","/auth/register"),{name:s.state.name,email:s.state.email,password:s.state.password,confirmPassword:s.state.confirmPassword}).then((function(e){e.data.status>300?s.setState({serverError:!0,error:e.data.error}):(console.log("res"),console.log(e),localStorage.setItem("user",JSON.stringify(e.data.user)),localStorage.setItem("token",e.data.token),s.props.saveAuthInfo(e.data.user,e.data.token),s.setState({shouldRedirect:!0}))})).catch((function(e){console.log(e)})):s.setState({confirmPasswordRequired:!0}):s.setState({passwordRequired:!0}):s.setState({emailRequired:!0}):s.setState({nameRequired:!0})},s}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.shouldRedirect?Object(s.jsx)(p.a,{to:"/"}):(console.log("this.state"),console.log(this.state),Object(s.jsxs)("div",{style:{marginTop:"100px",textAlign:"center"},children:[this.state.serverError?Object(s.jsx)("div",{style:{color:"red"},children:this.state.error}):null,Object(s.jsxs)("div",{style:{marginTop:"20px"},children:[Object(s.jsx)("div",{children:"name:"}),Object(s.jsx)("input",{onChange:function(t){return e.handleInput(t,"name")},type:"text"}),this.state.nameKey?Object(s.jsx)("div",{style:{color:"red"},children:"name should be greater than 4 characters."}):null,this.state.nameRequired?Object(s.jsx)("div",{style:{color:"red"},children:"name is required."}):null]}),Object(s.jsxs)("div",{style:{marginTop:"20px"},children:[Object(s.jsx)("div",{children:"email:"}),Object(s.jsx)("input",{onChange:function(t){return e.handleInput(t,"email")},type:"email"}),this.state.emailKey?Object(s.jsx)("div",{style:{color:"red"},children:"email is invalid."}):null,this.state.emailRequired?Object(s.jsx)("div",{style:{color:"red"},children:"email is required."}):null]}),Object(s.jsxs)("div",{style:{marginTop:"20px"},children:[Object(s.jsx)("div",{children:"password:"}),Object(s.jsx)("input",{onChange:function(t){return e.handleInput(t,"password")},type:"password"}),this.state.passwordKey?Object(s.jsx)("div",{style:{color:"red"},children:"password should be greater than 4 characters."}):null,this.state.passwordRequired?Object(s.jsx)("div",{style:{color:"red"},children:"password is required."}):null]}),Object(s.jsxs)("div",{style:{marginTop:"20px"},children:[Object(s.jsx)("div",{children:"confirm password:"}),Object(s.jsx)("input",{onChange:function(t){return e.handleInput(t,"confirmPassword")},type:"password"}),this.state.confirmPasswordKey?Object(s.jsx)("div",{style:{color:"red"},children:"password did not match."}):null,this.state.confirmPasswordRequired?Object(s.jsx)("div",{style:{color:"red"},children:"confirmed password is required."}):null]}),Object(s.jsx)("div",{style:{marginTop:"20px"},children:Object(s.jsx)("button",{onClick:function(){e.sendCode()},children:"register"})}),Object(s.jsx)("div",{style:{marginTop:"20px"},children:Object(s.jsx)(h.b,{to:"/login",children:"go to login"})}),Object(s.jsx)(b.a,{isOpen:this.state.modalIsOpen,onRequestClose:this.closeModal,contentLabel:"Verification Modal",ariaHideApp:!1,style:x,children:Object(s.jsxs)(y.a,{style:{width:"50%",margin:"auto"},children:[Object(s.jsx)(y.a.Title,{className:"bg-warning",style:{marginBottom:"0px"},children:Object(s.jsx)(g.a,{className:"backIcon",icon:v.a,onClick:this.closeModal})}),Object(s.jsxs)(y.a.Body,{className:"text-center",style:{border:"1",minHeight:"175px",paddingLeft:"0px",paddingRight:"0px"},children:[Object(s.jsx)("h5",{children:"Verification Modal"}),Object(s.jsxs)("div",{className:"text-center mt-4",children:[Object(s.jsx)("label",{children:"verification code:"}),Object(s.jsx)("input",{type:"text",onChange:function(t){return e.changeCode(t)},value:this.state.verificationCode}),Object(s.jsx)("button",{onClick:this.verifyCode,children:"Submit"})]})]})]})})]}))}}]),a}(c.Component);t.default=Object(l.b)((function(e){return{auth:e.auth}}),(function(e){return{saveAuthInfo:function(t,a){return e(Object(u.c)(t,a))}}}))(O)},78:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return i}));var s=a(18);function r(e,t){return"undefined"!=t&&"undefined"!=typeof t||(t=!1),{type:s.c,payload:{user:e,token:t}}}function n(e){return"undefined"!=e&&"undefined"!=typeof e||(e=!1),{type:s.b,payload:e}}function i(e){return"undefined"!=e&&"undefined"!=typeof e||(e=!1),{type:s.a,payload:e}}}}]);
//# sourceMappingURL=23.d48f41d9.chunk.js.map